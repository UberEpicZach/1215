# Tags:
# rank_headgear: any headgear that signifies a certain title. crowns, pope hat etc.



headgear = {	
	# interface_position = 1
	usage = game
	selection_behavior = weighted_random
	
	no_hat = {
		usage = game 
		dna_modifiers = {
			accessory = {
				mode = add
		
				gene = headgear
				template = no_headgear
				value = 0
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				AND = {
					# Deliberately not the "fully naked" one since dropping your crown's intended even if nudity is disabled
					should_be_naked_trigger = yes
				}
			}
			modifier = {
				factor = 0
				OR = {
					is_adult = no
					highest_held_title_tier >= tier_duchy # Should wear ducal or royal crown instead.
					AND = {
						religion = religion:christianity_religion
						faith.religious_head = this
					}
				}
			}
			# Refuses to wear a crown due to HighGod.
			modifier = {
				add = 110
				has_character_modifier = fp1_abased_before_highgod_modifier
			}
		}
	}

	## So that the Prophet Muhammad does not have a portrait ## 

	no_portrait = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 200
				this = character:33922
			}
		}
	}


	## No headgear for children under 16 ## 

	children_no_headgear = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 200000
				age < 16
			}
		}
	}

	no_headgear = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	

		weight = {
	## No headgear for children under 16 ## 
			base = 0
			modifier = {
				add = 100
				age < 16
			}
			# No headgear for characters with an active Vow of Poverty
			modifier = {
				add = 100
				has_character_modifier = vow_of_poverty_modifier
				# Should still wear armor when going to war
				NOT = { portrait_wear_armor_trigger = yes }
			}
			
			
		}
	}



	vanity_no_headgear = {
	
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	

		## No headgear for vanity characters with the no_headgear flag, unless they are dukes or higher
		weight = {  
			base = 0
			modifier = {
				add = 200
				has_character_flag = no_headgear
				highest_held_title_tier < tier_duchy
			}
		}
	}

	## DDE HRE ##

	## Western ##

	dde_hre_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_dde_hre_clothing_trigger = yes
			}
		}
	}

	hre_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_dde_hre_clothing_trigger = yes
			}
		}
	}

	dde_hre_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = french_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_dde_hre_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_dde_hre_clothing_trigger = yes
						}
					}
				}

			}
		}
	}
	dde_hre_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0

			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_dde_hre_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_dde_hre_clothing_trigger = yes
						}
					}
				}
			}
		}
	}

	dde_hre_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				exists = character:205599 #king_lothaire
				this = character:205599
			}
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_dde_hre_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_dde_hre_clothing_trigger = yes
						}
					}
				}
			}
		}
	}

	# Reichskrone
	hre_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # always pick the HRE crown over the western one
					has_primary_title = title:e_hre
			}
			modifier = {
				add = -100 # always pick the Byzantine Crown if that's your primary title
				primary_title = title:e_byzantium
			}
		}
	}


	dde_hre_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # larger than the western war headgear
				portrait_wear_helmet_trigger = yes
				portrait_dde_hre_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}

	## Western ##

	western_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_western_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_western_clothing_trigger = yes
			}
		}
	}

	western_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_western_clothing_trigger = yes
			}
		}
	}

	western_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_count
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						OR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_western_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_western_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	western_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						OR = {
							portrait_western_clothing_trigger = yes
							AND = {
								portrait_northern_clothing_trigger = yes
								OR = {
									portrait_fp1_norse_clothing_trigger = no
									AND = {
										portrait_fp1_norse_clothing_trigger = yes
										NOR = {
											has_government = tribal_government
											religion = religion:germanic_religion
										}
									}
								}
							}
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							OR = {
								portrait_western_clothing_trigger = yes
								OR = {
									portrait_fp1_norse_clothing_trigger = no
									AND = {
										portrait_fp1_norse_clothing_trigger = yes
										NOR = {
											has_government = tribal_government
											religion = religion:germanic_religion
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}

	western_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
							AND = {
								highest_held_title_tier = tier_empire
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						OR = {
							portrait_western_clothing_trigger = yes
							AND = {
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
							AND = {
								portrait_fp1_norse_clothing_trigger = yes
								NOR = {
									has_government = tribal_government
									religion = religion:germanic_religion
								}
							}
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
								AND = {
									highest_held_title_tier = tier_empire
									portrait_northern_clothing_trigger = yes
									portrait_fp1_norse_clothing_trigger = no
								}
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							OR = {
								portrait_western_clothing_trigger = yes
								AND = {
									portrait_northern_clothing_trigger = yes
									portrait_fp1_norse_clothing_trigger = no
								}
								AND = {
									portrait_fp1_norse_clothing_trigger = yes
									NOR = {
										has_government = tribal_government
										religion = religion:germanic_religion
									}
								}
							}
						}
					}
				}
			}
		}
	}

	western_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_western_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_western_clothing_trigger = yes
						}
					}
				}

			}
		}
	}


	western_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_war
				range = { 0 1 } # For the randomness to work correctly
			}
			morph = {
				mode = modify_multiply
				gene = gene_bs_ear_outward
				value = 1.0
				template = ear_outward_neg
			}			
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_western_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}


	crusades_western_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = crusades_western_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_wear_helmet_trigger = yes
				OR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}



	## Byzantine ##


	byzantine_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_byzantine_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_byzantine_clothing_trigger = yes
			}
		}
	}

	byzantine_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_byzantine_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_byzantine_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	byzantine_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_byzantine_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_byzantine_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	byzantine_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_byzantine_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_byzantine_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	byzantine_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_byzantine_clothing_trigger = yes
					}
					#AND = {
					#	exists = primary_spouse
					#	is_ruler = no
					#	primary_spouse = {
					#		OR = {
					#			highest_held_title_tier = tier_empire
					#			AND = { is_ruler = yes has_government = theocracy_government }
					#		}
					#		NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
					#		NOT = { has_government = republic_government }
					#		portrait_byzantine_clothing_trigger = yes
					#	}
					#}
				}

			}
		}
	}

	byzantine_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_byzantine_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}

	## INDIAN ##

	indian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_indian_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_indian_clothing_trigger = yes
			}
		}
	}

	indian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_indian_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	indian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_indian_clothing_trigger = yes
						}
					}
				}				

			}
		}
	}

	indian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_indian_clothing_trigger = yes
						}
					}
				}				

			}
		}
	}

	indian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_indian_clothing_trigger = yes
						}
					}
				}				

			}
		}
	}

	indian_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_indian_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}


	## MENA ##

	mena_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_mena_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_mena_clothing_trigger = yes
			}
		}
	}

	mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_mena_clothing_trigger = yes
			}
		}
	}

	mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_mena_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_mena_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_mena_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_mena_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_mena_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_mena_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_mena_clothing_trigger = yes
			}
		}
	}

	mena_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_mena_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}
	
	## DDE ABBASID Early##

	high_middle_ages_sunni_caliph = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = high_abbasid_caliph
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_title = title:d_sunni				
				EPE_culture_era_high_medieval_trigger = yes				
			}
		}
	}


	early_middle_ages_sunni_caliph = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_caliph
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_title = title:d_sunni
				EPE_culture_era_early_medieval_trigger = yes				
			}
		}
	}		
	
	dde_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes					
			}
		}
	}

	dde_abbasid_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes					
			}
		}
	}

	dde_abbasid_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes								
						}
					}
				}

			}
		}
	}

	dde_abbasid_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_dde_abbasid_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_dde_abbasid_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	dde_abbasid_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_dde_abbasid_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_dde_abbasid_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	dde_abbasid_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over mena
				NAND = {
					has_trait = peasant_leader
					OR = {
						EPE_culture_era_early_medieval_trigger = yes
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_dde_abbasid_clothing_trigger = yes
			}
		}
	}

	dde_abbasid_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # slightly higher than mena
				OR = { # This helmet is really fancy & gilded - it's nothing for commoners. We allow Dukes+ to use it sometimes, just because it suits them!
					AND = {
						has_council_position = councillor_marshal
						OR = {
							is_landed = no
							primary_title.tier >= tier_duchy
						}
					}
					AND = {
						is_commanding_army = yes
						AND = {
							exists = primary_title
							primary_title.tier >= tier_duchy
						}
					}
				}
				portrait_mena_clothing_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
					AND = {
						has_trait = peasant_leader
						OR = {
							is_ruler = no
							is_leading_faction_type = peasant_faction
							AND = {
								is_ruler = yes
								is_landed = no
								OR = {
									has_government = feudal_government
									has_government = clan_government
								}
							}
						}
					}
				}
			}
		}
	}


	## Steppe ##

	steppe_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_steppe_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_steppe_clothing_trigger = yes
			}
		}
	}

	steppe_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_steppe_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_steppe_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	steppe_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_steppe_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_steppe_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	steppe_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier > tier_duchy
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_steppe_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier > tier_duchy
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_steppe_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	steppe_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_steppe_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}


	## Northern Pagans ##

	northern_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 70
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_northern_clothing_trigger = yes
			}
			modifier = {
				add = 30
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_northern_clothing_trigger = yes
				portrait_gaelic_clothing_trigger = yes							
			}
		}
	}

	northern_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_county
				NOR = {
					# has_dynasty = no
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
			portrait_northern_clothing_trigger = yes
			portrait_gaelic_clothing_trigger = yes							
			}
		}
	}


	northern_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				OR = {
					portrait_northern_clothing_trigger = yes
					portrait_gaelic_clothing_trigger = yes
				}
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}

	## FP1 NORSE ##

	fp1_norse_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_fp1_norse_clothing_trigger = yes
			}
			modifier = {
				add = 41 # Slightly higher
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_fp1_norse_clothing_trigger = yes
			}
		}
	}

	fp1_norse_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_county
				NOR = {
					# has_dynasty = no
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_fp1_norse_clothing_trigger = yes
			}
		}
	}

	fp1_norse_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_fp1_norse_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_fp1_norse_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	fp1_norse_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_fp1_norse_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_fp1_norse_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	fp1_norse_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over northern
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_fp1_norse_clothing_trigger = yes
			}
		}
	}

	fp1_norse_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # slightly higher than northern
				OR = { # This helmet is really fancy & gilded - it's nothing for commoners. We allow Dukes+ to use it sometimes, just because it suits them!
					AND = {
						has_council_position = councillor_marshal
						OR = {
							is_landed = no
							primary_title.tier >= tier_duchy
						}
					}
					AND = {
						is_commanding_army = yes
						AND = {
							exists = primary_title
							primary_title.tier >= tier_duchy
						}
					}
				}
				portrait_fp1_norse_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
					AND = {
						has_trait = peasant_leader
						OR = {
							is_ruler = no
							is_leading_faction_type = peasant_faction
							AND = {
								is_ruler = yes
								is_landed = no
								OR = {
									has_government = feudal_government
									has_government = clan_government
								}
							}
						}
					}
				}
			}
		}
	}

	fp1_norse_war_common = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_war_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_fp1_norse_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}




	## Sub-Saharan Africans ##

	african_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_african_clothing_trigger = yes
			}
			modifier = {
				add = 50
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_african_clothing_trigger = yes
			}
		}
	}

	sub_saharan_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						portrait_african_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_african_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	sub_saharan_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_african_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_african_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	sub_saharan_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_african_clothing_trigger = yes
			}
		}
	}


	sub_saharan_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_african_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}




	######## Religious ##########


	## Orthodox ##

	religious_orthodox_high_clothes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_orthodox_high
				range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit bishop_outfit }
		weight = {
			base = 0
			modifier = {
				add = 130
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				OR = {
					faith = faith:orthodox
					faith = faith:armenian_apostolic
					faith = faith:coptic
					faith = faith:messalian
					faith = faith:bogomilist
					faith = faith:paulician
					faith = faith:nestorian
				}
				NAND = {	
					is_ruler = yes
					primary_title = {
						exists = controlled_faith
						controlled_faith = faith:orthodox
					}
				}
				NOT = {
					faith = {
						has_doctrine_parameter = vows_of_poverty_active
					}
				}
			}
		}
	}

	religious_orthodox_head_clothes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_orthodox_head
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 200
				faith = faith:orthodox
				exists = primary_title
				primary_title = {
					exists = controlled_faith
				}
				NOT = {
					faith = {
						has_doctrine_parameter = vows_of_poverty_active
					}
				}
			}
		}
	}	


	## Catholic ##

	catholic_devoted = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_catholic_devoted
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					has_trait = devoted
					AND = {
						faith = {
							has_doctrine_parameter = vows_of_poverty_active
						}
						OR = {
							AND = {
								has_council_position = councillor_court_chaplain
								faith = {
									has_doctrine = doctrine_theocracy_lay_clergy
								}
							}
							is_theocratic_lessee = yes
							AND = { is_ruler = yes has_government = theocracy_government }
						}
					}
				}
				religion = religion:christianity_religion
			}
		}
	}

	catholic_head = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			accessory = {
				mode = add
				
				gene = headgear
				template = catholic_head
				range = { 0 1 }
			}

			accessory = {
				mode = add
				
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 110
				exists = primary_title
				primary_title = {
					exists = controlled_faith
					controlled_faith = faith:catholic
				}
				NOT = {
					faith = {
						has_doctrine_parameter = vows_of_poverty_active
					}
				}
			}
		}
	}

	catholic_high = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			accessory = {
				mode = add
				
				gene = headgear
				template = catholic_high
				range = { 0 1 }
			}

			accessory = {
				mode = add
				
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit bishop_outfit }
		weight = {
			base = 0
			modifier = {
				add = 120
				faith = { religion_tag = christianity_religion }
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				NOT = {
					faith = {
						has_doctrine_parameter = vows_of_poverty_active
					}
				}
			}
		}
	}

	#religious_catholic_high_headgear = {
	#    dna_modifiers = {
	#        accessory = {
	#            mode = add
	#            gene = headgear
	#            template = religious_orthodox_high
	#            range = { 1 1 }
	#        }
	#    }
	#    outfit_tags = { bishop_outfit }
	#    weight = {
	#        base = 130
	#        modifier = {
	#            factor = 0
	#            OR = {
	#            	AND = {
	#                	is_theocratic_lessee = no
	#                	NOT = { AND = { is_ruler = yes has_government = theocracy_government } }
	#                	NOT = { faith.religious_head = root }
	#                }
	#                NOT = { faith = { religion_tag = christianity_religion } }
	#            }
	#        }
	#    }
	#}



	popes = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			accessory = {
				mode = add
				
				gene = headgear
				template = catholic_head
				range = { 0 1 }
			}

			accessory = {
				mode = add
				
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 140
				faith = faith:catholic
				is_adult = yes
				religion = religion:christianity_religion
				exists = primary_title
				primary_title = {
					exists = controlled_faith
				}
			}
		}
	}

	## Jewish ##

	religious_jewish_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_jewish_high
				range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:judaism_religion
					religion = religion:hellenism_religion
				}
			}
		}
	}

	religious_jewish_head = {
		outfit_tags = { rank_headgear }
		usage = game
		
		dna_modifiers = {
			accessory = {
				mode = add
				
				gene = headgear
				template = religious_jewish_head
				range = { 0 1 }
			}

			#accessory = {
			#	mode = add
			#	
			#	gene = hairstyles
			#	template = no_hairstyles
			#	range = { 0 1 }
			#}
		}	
		weight = {
			base = 0
			modifier = {
				add = 140
				faith.religion = religion:judaism_religion
				exists = primary_title
				primary_title = {
					exists = controlled_faith
				}
			}
		}
	}

	## Muslim ##	

	religious_muslim_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_muslim_high
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 111
				OR = { 
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religion = religion:islam_religion
			}
		}
	}




	## Northern Pagan ##

	religious_northern_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_northern_high
				range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:germanic_religion
					religion = religion:baltic_religion
					religion = religion:finno_ugric_religion
					religion = religion:paganism_religion
					religion = religion:slavic_religion
				}
			
			}
		}
	}



	## Steppe ##

	religious_steppe_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_steppe_high
				range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:tengrism_religion
					religion = religion:qiangic_religion
				}
			}
		}
	}

	## Buddhist ##

	religious_buddhist_devoted_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				has_trait = devoted
				OR = {
					religion = religion:buddhism_religion
					religion = religion:bon_religion
					religion = religion:taoism_religion
				}
			}
		}
	}

	religious_buddhist_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 110
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:buddhism_religion
					religion = religion:bon_religion
					religion = religion:taoism_religion
				}
			}
		}
	}

	## Hinduist ##

	religious_hindu_devoted_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				has_trait = devoted
				OR = {
					religion = religion:hinduism_religion
				}
			}
		}
	}

	religious_hindu_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 110
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:hinduism_religion
				}
			}
		}
	}

	## Zoroastrian ##

	religious_zoroastrian_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_zoroastrian_high
				range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:zoroastrianism_religion
					religion = religion:yazidi_religion
					religion = religion:zunism_religion
					faith = faith:mandeaism
					religion = religion:dualism_religion
				}
			}
		}
	}

	## Jain ##

	religious_jain_devoted_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				has_trait = devoted
				OR = {
					religion = religion:jainism_religion
				}
			}
		} 
	}

	religious_jain_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 110
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:jainism_religion
				}			
			}
		}
	}

	## African Pagan ##

	# religious_african_devoted_clothes = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = clothes
	# 			template = mena_commoner_clothes
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}
	# 	outfit_tags = { monk_outfit }
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 100
	# 			has_trait = devoted
	# 			religion = religion:islam_religion
	# 		}
	# 	}
	# }

	religious_african_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_african_high
				range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 110
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:akom_religion
					religion = religion:waaqism_religion
					religion = religion:west_african_religion
					religion = religion:west_african_bori_religion
					religion = religion:west_african_roog_religion
					religion = religion:kushitism_religion
				}
			}
		}
	}

	# religious_muslim_head_clothes = {
	#     dna_modifiers = {
	#         accessory = {
	#             mode = add
	#             gene = clothes
	#             template = religious_muslim_high_clothes
	#             range = { 0 1 }
	#         }
	#     }
	#     weight = {
	#         base = 0
	#         modifier = {
	#             add = 60
	# 			is_ruler = yes
	# 			primary_title = {
	# 				exists = controlled_faith
	# 				controlled_faith = faith:orthodox
	# 			}
	#         }
	#     }
	# }	


	hre_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # always pick the HRE crown over the western one
				has_character_flag = artifact_1_equipped
			}
			modifier = {
				add = -100 # always pick the Byzantine Crown if that's your primary title
				primary_title = title:e_byzantium
			}
		}
	}

	imperial_no_portrait = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 2000
				has_character_flag = Free_City
			}
		}
	}

	portrait_dragon = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 2000
				has_trait = koh_dragon
			}
		}
	}

	######Han

	## taoism ##

	religious_taoism_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_taoism_high
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			
			modifier = {
				add = 120
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religion = religion:taoism_religion
			}
		}
	}

	## China ##

	chinese_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = chinese_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
			weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
						highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_han_clothing_trigger = yes
			}
		}
	}

	chinese_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = chinese_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_han_clothing_trigger = yes
			}
		}
	}

	chinese_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = chinese_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_han_clothing_trigger = yes
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOT = {
						AND = { is_ruler = yes has_government = theocracy_government }
						}	
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOT = {
							AND = { is_ruler = yes has_government = theocracy_government }
							}
						}
					}
				}

			}
		}
	}

	chinese_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = chinese_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_han_clothing_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = { is_ruler = yes has_government = theocracy_government }
							}
						}
					}
				}

			}
		}
	}

	chinese_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = chinese_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_han_clothing_trigger = yes
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } # Blocked for mercenaries
						}
					}
				}

			}
		}
	}

	chinese_princes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = chinese_prince
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				any_parent = { highest_held_title_tier = tier_empire }
				portrait_han_clothing_trigger = yes
			}
		}
	}

	chinese_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = chinese_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_han_clothing_trigger = yes
			}
		}
	}


	han_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = chinese_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_han_clothing_trigger = yes
			}
		}
	}


	#### Tribal sub_saharan African


	## Sub-Saharan Tribal Africans ##

	african_tribal_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					has_government = theocracy_government
				}
				portrait_sub_saharan_african_tribal_clothing_trigger = yes
			}
		}
	}

	sub_saharan_tribal_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_northern_high
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_sub_saharan_african_tribal_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_sub_saharan_african_tribal_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	sub_saharan_tribal_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_african_high
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_sub_saharan_african_tribal_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_sub_saharan_african_tribal_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	sub_saharan_tribal_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				highest_held_title_tier = tier_empire
				NOR = {
					has_government = mercenary_government
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_sub_saharan_african_tribal_clothing_trigger = yes
			}
		}
	}

	sub_saharan_tribal_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_sub_saharan_african_tribal_clothing_trigger = yes
			}
		}
	}


	## Iranian ##

	iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = iranian_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_iranian_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes					
			}
		}
	}

	iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_iranian_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes					
			}
		}
	}

	iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_iranian_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_iranian_clothing_trigger = yes
							EPE_culture_era_high_medieval_trigger = yes								
						}
					}
				}

			}
		}
	}

	iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = iranian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_iranian_clothing_trigger = yes
						EPE_culture_era_high_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_iranian_clothing_trigger = yes
							EPE_culture_era_high_medieval_trigger = yes								
						}
					}
				}

			}
		}
	}

	iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = iranian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_iranian_clothing_trigger = yes
						EPE_culture_era_high_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_iranian_clothing_trigger = yes
							EPE_culture_era_high_medieval_trigger = yes								
						}
					}
				}

			}
		}
	}

	iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = iranian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				highest_held_title_tier = tier_empire
				NOR = {
					has_government = mercenary_government
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_iranian_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes					
			}
		}
	}

	iranian_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = iranian_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_iranian_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes					
			}
		}
	}	


	## turkish ##

	turkish_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = turkish_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					has_government = theocracy_government
				}
				portrait_turkish_clothing_trigger = yes
			}
		}
	}

	turkish_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = turkish_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_county
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_turkish_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 1	}
								has_government = theocracy_government
							}
							portrait_turkish_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	turkish_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = turkish_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_turkish_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_turkish_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	turkish_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = turkish_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier > tier_duchy
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_turkish_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier > tier_duchy
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_turkish_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	turkish_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = turkish_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_turkish_clothing_trigger = yes
			}
		}
	}	
	

	## south_south_indian ##

	south_south_indian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_indian_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					has_government = theocracy_government
				}
				portrait_south_indian_clothing_trigger = yes
			}
		}
	}

	south_indian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_indian_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_south_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_south_indian_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	south_indian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_indian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_south_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_south_indian_clothing_trigger = yes
						}
					}
				}				
			}
		}
	}

	south_indian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_south_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_south_indian_clothing_trigger = yes
						}
					}
				}				

			}
		}
	}

	south_indian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_south_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_south_indian_clothing_trigger = yes
						}
					}
				}				

			}
		}
	}

	south_indian_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_indian_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_south_indian_clothing_trigger = yes
			}
		}
	}
	
	
	
	## french ##

	french_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = french_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_french_clothing_trigger = yes
			}
		}
	}

	french_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = french_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_french_clothing_trigger = yes
			}
		}
	}

	french_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = french_count
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_french_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_french_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	french_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = french_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_french_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_french_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	french_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = french_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_french_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_french_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	french_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = french_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				highest_held_title_tier = tier_empire
				NOR = {
					has_government = mercenary_government
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_french_clothing_trigger = yes
			}
		}
	}

	french_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = french_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_french_clothing_trigger = yes
			}
		}
	}

	french_charlemagne_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = french_charlemagne_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			
				
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 #
							OR = {
				has_title = title:e_france
				has_title = title:k_france				
							}
			}
		}
	}
	

	polish_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = polish_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 #
							OR = {
				has_title = title:k_poland				
							}
			}
		}
	}	
	

	## ghaznavid ##

	ghaznavid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ghaznavid_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_ghaznavid_clothing_trigger = yes
			}
		}
	}

	ghaznavid_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ghaznavid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_ghaznavid_clothing_trigger = yes
			}
		}
	}

	ghaznavid_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ghaznavid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_ghaznavid_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_ghaznavid_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	ghaznavid_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ghaznavid_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_ghaznavid_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_ghaznavid_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	ghaznavid_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ghaznavid_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_ghaznavid_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_ghaznavid_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	ghaznavid_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ghaznavid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				highest_held_title_tier = tier_empire
				NOR = {
					has_government = mercenary_government
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_ghaznavid_clothing_trigger = yes
			}
		}
	}

	ghaznavid_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ghaznavid_war
				range = { 0 1 } # For the randomness to work correctly
			}
			morph = {
				mode = modify_multiply
				gene = gene_bs_ear_outward
				value = 1.0
				template = ear_outward_neg
			}			
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_ghaznavid_clothing_trigger = yes
			}
		}
	}	

	
	Ghaznavid_kabulistan_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ghaznavid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 #
							OR = {
				primary_title = title:k_kabulistan			
							}
			}
		}
	}	
	
	## italian ##

	italian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = italian_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_italian_clothing_trigger = yes
			}
		}
	}

	italian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = italian_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_italian_clothing_trigger = yes
			}
		}
	}

	italian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = italian_count
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_italian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_italian_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	italian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = italian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						OR = {
							portrait_italian_clothing_trigger = yes

						}
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							OR = {
								portrait_italian_clothing_trigger = yes

							}
						}
					}
				}
			}
		}
	}

	italian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = italian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						OR = {
							portrait_italian_clothing_trigger = yes
		
						}
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							OR = {
								portrait_italian_clothing_trigger = yes

							}
						}
					}
				}
			}
		}
	}

	italian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = italian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_italian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_italian_clothing_trigger = yes
						}
					}
				}

			}
		}
	}
	
	italian_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = italian_war
				range = { 0 1 } # For the randomness to work correctly
			}
			morph = {
				mode = modify_multiply
				gene = gene_bs_ear_outward
				value = 1.0
				template = ear_outward_neg
			}			
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_italian_clothing_trigger = yes
			}
		}
	}		
	
	
		
	############################	
	norse_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = norse_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_northern_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_northern_clothing_trigger = yes
						}
					}
				}

			}
		}
	}
	
	############################
	###Irish	
	gaelic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gaelic_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_gaelic_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_gaelic_clothing_trigger = yes
						}
					}
				}

			}
		}
	}
	
	
	## seljuk ##

	seljuk_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_seljuk_clothing_trigger = yes
			}
		}
	}

	seljuk_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_seljuk_clothing_trigger = yes
			}
		}
	}

	seljuk_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_seljuk_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_seljuk_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	seljuk_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 101
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_seljuk_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_seljuk_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	seljuk_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 101
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_seljuk_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_seljuk_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	seljuk_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				highest_held_title_tier = tier_empire
				NOR = {
					has_government = mercenary_government
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_seljuk_clothing_trigger = yes
			}
		}
	}

	seljuk_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_seljuk_clothing_trigger = yes
			}
		}
	}	
		

	## DDE ABBASID High Middle Ages##


	dde_high_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_high_abbasid_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes						
			}
		}
	}

	dde_high_abbasid_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_high_abbasid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes						
			}
		}
	}

	dde_high_abbasid_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_high_abbasid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes								
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes									
							
						}
					}
				}

			}
		}
	}

	dde_high_abbasid_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_high_abbasid_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes								
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes									
						}
					}
				}

			}
		}
	}

	dde_high_abbasid_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_high_abbasid_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes								
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes									
						}
					}
				}

			}
		}
	}

	dde_high_abbasid_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_high_abbasid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes								
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes									
						}
					}
				}
			}
		}
	}

	dde_high_abbasid_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_high_abbasid_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_dde_abbasid_clothing_trigger = yes
				EPE_culture_era_high_medieval_trigger = yes						
				
			}
		}
	}
	

	##########Tahirid dynasty
	tahirid_dynasty_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes					
			}
		}
	}

	tahirid_dynasty_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes					
			}
		}
	}

	tahirid_dynasty_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes								
						}
					}
				}

			}
		}
	}

	tahirid_dynasty_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes								
						}
					}
				}

			}
		}
	}

	tahirid_dynasty_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes								
						}
					}
				}

			}
		}
	}

	tahirid_dynasty_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes								
						}
					}
				}
			}
		}
	}

	tahirid_dynasty_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_tahirid_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes					
			}
		}
	}



	## east_african ##

	east_african_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_african_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					has_government = theocracy_government
				}
				portrait_east_african_clothing_trigger = yes
			}
		}
	}

	east_african_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_african_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						OR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_east_african_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_east_african_clothing_trigger = yes
						}
					}
				}
			}
		}
	}

	east_african_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_african_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						OR = {
							portrait_east_african_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							OR = {
								portrait_east_african_clothing_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	east_african_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_african_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						OR = {
							portrait_east_african_clothing_trigger = yes						
						}
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
						OR = {
							portrait_east_african_clothing_trigger = yes					
						}
						}
					}
				}
			}
		}
	}

	east_african_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_african_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_east_african_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_east_african_clothing_trigger = yes
						}
					}
				}

			}
		}
	}


	east_african_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_african_war
				range = { 0 1 } # For the randomness to work correctly
			}
			morph = {
				mode = modify_multiply
				gene = gene_bs_ear_outward
				value = 1.0
				template = ear_outward_neg
			}			
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_east_african_clothing_trigger = yes
			}
		}
	}



	##Early Eastern Iranian ##

	early_eastern_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_eastern_iranian_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_early_eastern_iranian_trigger = yes					
			}
		}
	}

	early_eastern_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_eastern_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_early_eastern_iranian_trigger = yes				
			}
		}
	}

	early_eastern_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_eastern_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_early_eastern_iranian_trigger = yes					
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_early_eastern_iranian_trigger = yes							
						}
					}
				}

			}
		}
	}

	early_eastern_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_eastern_iranian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_early_eastern_iranian_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_early_eastern_iranian_trigger = yes								
						}
					}
				}

			}
		}
	}

	early_eastern_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_eastern_iranian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_early_eastern_iranian_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_early_eastern_iranian_trigger = yes								
						}
					}
				}

			}
		}
	}

	early_eastern_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_eastern_iranian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
							portrait_early_eastern_iranian_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_early_eastern_iranian_trigger = yes
						}
					}
				}

			}
		}
	}

	early_eastern_iranian_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_eastern_iranian_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_iranian_clothing_trigger = yes
				portrait_early_eastern_iranian_trigger = yes				
			}
		}
	}

	##Early Islamic Iranian ##

	early_islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_iranian_clothing_trigger = yes
				portrait_early_islamic_iranian_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes		
			}
		}
	}

	early_islamic_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_iranian_clothing_trigger = yes
				portrait_early_islamic_iranian_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes					
			}
		}
	}

	early_islamic_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_iranian_clothing_trigger = yes
				portrait_early_islamic_iranian_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_iranian_clothing_trigger = yes
				portrait_early_islamic_iranian_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes								
						}
					}
				}

			}
		}
	}

	early_islamic_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_iranian_clothing_trigger = yes
				portrait_early_islamic_iranian_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_iranian_clothing_trigger = yes
				portrait_early_islamic_iranian_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes							
						}
					}
				}

			}
		}
	}

	early_islamic_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_iranian_clothing_trigger = yes
				portrait_early_islamic_iranian_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes							
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_iranian_clothing_trigger = yes
				portrait_early_islamic_iranian_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes								
						}
					}
				}

			}
		}
	}

	early_islamic_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				highest_held_title_tier = tier_empire
				NOR = {
					has_government = mercenary_government
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_iranian_clothing_trigger = yes
				portrait_early_islamic_iranian_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes					
			}
		}
	}

	early_islamic_iranian_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_iranian_clothing_trigger = yes
				portrait_early_islamic_iranian_trigger = yes
				EPE_culture_era_early_medieval_trigger = yes					
			}
		}
	}	

	##########Shahi dynasty
	shahi_dynasty_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_common
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					has_government = theocracy_government
				}
				portrait_shahi_trigger = yes
			}
		}
	}

	shahi_dynasty_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_shahi_trigger = yes			
			}
		}
	}

	shahi_dynasty_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							has_government = theocracy_government
						}
						portrait_shahi_trigger = yes				
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								has_government = theocracy_government
							}
							portrait_shahi_trigger = yes						
						}
					}
				}

			}
		}
	}

	shahi_dynasty_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						portrait_shahi_trigger = yes						
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								has_government = theocracy_government
							}
							portrait_shahi_trigger = yes						
						}
					}
				}

			}
		}
	}

	shahi_dynasty_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_shahi_trigger = yes					
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_shahi_trigger = yes						
						}
					}
				}

			}
		}
	}

	shahi_dynasty_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							has_government = theocracy_government
						}
						NOT = { has_government = mercenary_government } # Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_shahi_trigger = yes					
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								has_government = theocracy_government
							}
							NOT = { has_government = mercenary_government } # Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_shahi_trigger = yes						
						}
					}
				}
			}
		}
	}

	shahi_dynasty_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_shahi_trigger = yes			
			}
		}
	}


	## So there can be some starter leaders who don't use the base headgear ## 
	saffarid = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = saffarid_qalansuwa
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
				this = character:163101
			}
		}
	}

	samanid = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = samanid_qalansuwa
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
				this = character:163099
			}
		}
	}

	baldwin = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = baldwin_face_mask
				template = face_mask
				#value = 1.0
				range = { 1 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_imperial
				range = { 1 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_baldwin_trigger = yes
				is_female = no
			}
			modifier = {
				add = 130
				this = character:223523
			}
		}
	}
	saladin = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ayyubid_royalty_war 
				#value = 100
				range = { 1 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_saladin_trigger = yes
				is_female = no
			}
			modifier = {
				add = 130
				this = character:226000
			}
		}
	}
	richard = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = royal_helmet 
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_richard_trigger = yes
				portrait_wear_armor_trigger = yes
				is_female = no
			}
			modifier = {
				add = 130
				portrait_wear_armor_trigger = yes
				this = character:204510
			}
		}
	}
	altair = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_stealth
				#value = 100
				range = { 1 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_altair_trigger = yes
				is_female = no
			}
			modifier = {
				add = 130
				this = character:KOH0030
			}
		}
	}
	sinan = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_stealth
				#value = 100
				range = { 1 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_sinan_trigger = yes
				is_female = no
			}
			modifier = {
				add = 130
				this = character:227012
			}
		}
	}
}


